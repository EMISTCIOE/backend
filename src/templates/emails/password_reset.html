<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Password Reset Request - TCIOE EMIS</title>
    <style>
      body {
        margin: 0;
        padding: 20px;
        font-family: Arial, sans-serif;
        background-color: #f5f5f5;
        color: #333;
      }
      .container {
        max-width: 600px;
        margin: 0 auto;
        background: white;
        border: 1px solid #ddd;
      }
      .header {
        background: #2c3e50;
        color: white;
        padding: 20px;
        text-align: center;
      }
      .logo {
        width: 80px;
        height: 80px;
        margin: 0 auto 15px;
        display: block;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }
      .content {
        padding: 25px;
      }
      h1 {
        font-size: 24px;
        margin: 0 0 15px;
        color: #2c3e50;
      }
      p {
        margin: 0 0 15px;
        line-height: 1.5;
      }
      .account-info {
        background: #f8f9fa;
        border-left: 3px solid #2c3e50;
        padding: 15px;
        margin: 15px 0;
        border-radius: 0 5px 5px 0;
      }
      .account-info p {
        margin: 5px 0;
        color: #555;
      }
      .btn {
        display: inline-block;
        background: #e74c3c;
        color: white !important;
        padding: 12px 24px;
        text-decoration: none;
        border-radius: 5px;
        font-weight: bold;
        margin: 15px 0;
      }
      .btn:hover {
        background: #c0392b;
      }
      .security-notice {
        background: #fff8e1;
        border: 1px solid #ffc107;
        border-radius: 5px;
        padding: 15px;
        margin: 20px 0;
        color: #8f6e00;
      }
      .security-notice strong {
        color: #6c5700;
      }
      .footer {
        background: #2c3e50;
        color: white;
        padding: 20px;
        text-align: center;
        font-size: 12px;
      }
      .footer * {
        color: white !important;
      }
      .footer-logo-fallback {
        width: 60px;
        height: 60px;
        margin: 0 auto 15px;
        border-radius: 8px;
        background: #34495e;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 18px;
        font-weight: bold;
        border: 2px solid #5a6c7d;
      }
      .footer-section {
        margin: 15px 0;
        text-align: center;
      }
      .footer-section strong {
        color: white !important;
        display: block;
        margin-bottom: 8px;
        font-size: 14px;
      }
      .footer-link {
        color: #1abc9c !important;
        text-decoration: none;
      }
      .footer-link:visited {
        color: #1abc9c !important;
      }
      .copyright {
        margin-top: 20px;
        padding-top: 15px;
        border-top: 1px solid #34495e;
        font-size: 11px;
        color: #bdc3c7 !important;
        text-align: center;
        line-height: 1.4;
      }
      .social-icon {
        border-radius: 50%;
        margin: 0 5px;
      }

      /* Media Queries for Mobile */
      @media (max-width: 600px) {
        body {
          padding: 10px;
        }
        .container {
          margin: 0;
        }
        .content {
          padding: 20px;
        }
        .header {
          padding: 20px 15px;
        }
        .footer {
          padding: 20px 15px;
        }
        .footer-logo-fallback {
          width: 50px;
          height: 50px;
          font-size: 16px;
        }
        .btn {
          display: block;
          text-align: center;
          width: 100%;
          box-sizing: border-box;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <img
          src="https://res.cloudinary.com/deibqsazd/image/upload/v1763796707/logo_kbfjba.png"
          alt="TCIOE Logo"
          class="logo"
          onerror="this.style.display='none'; this.nextElementSibling.style.display='block';"
        />
        <div class="footer-logo-fallback" style="display: none">TC</div>
        <h2 style="margin: 0; font-size: 22px; font-weight: 600; color: white">
          TCIOE EMIS System
        </h2>
        <p
          style="margin: 8px 0 5px; font-size: 14px; opacity: 0.9; color: white"
        >
          Thapathali Campus, Institute of Engineering
        </p>
        <p
          style="
            margin: 0;
            font-size: 12px;
            opacity: 0.8;
            line-height: 1.4;
            color: white;
          "
        >
          Educational Management Information System
        </p>
      </div>

      <div class="content">
        <h1>üîê Password Reset Request</h1>
        <p>
          Hello {{ user_name }}, we received a request to reset your password
          for your TCIOE account. Use the secure link below to create a new
          password.
        </p>

        <div class="account-info">
          <p><strong>üìß Email:</strong> {{ user_email }}</p>
          {% if primary_role_label %}
          <p><strong>üë§ Primary Role:</strong> {{ primary_role_label }}</p>
          {% endif %} {% if designation_title %}
          <p><strong>üè¢ Designation:</strong> {{ designation_title }}</p>
          {% endif %} {% if user_role %}
          <p><strong>üîê Additional Roles:</strong> {{ user_role }}</p>
          {% endif %} {% if username %}
          <p><strong>üë§ Username:</strong> {{ username }}</p>
          {% endif %}
        </div>

        <div style="text-align: center; margin: 25px 0">
          <a href="{{ reset_link }}" class="btn">üîë Reset My Password</a>
        </div>

        <div class="security-notice">
          <strong>‚ö†Ô∏è Important Security Notice:</strong>
          This password reset link will expire in 24 hours for your security. If
          you did not request this password reset, please ignore this message or
          contact the TCIOE EMIS support team immediately.
        </div>

        <p style="font-size: 13px; color: #6b7280; margin-top: 20px">
          If the button above doesn't work, copy and paste this link into your
          browser:<br />
          <a
            href="{{ reset_link }}"
            style="color: #3498db; word-break: break-all"
            >{{ reset_link }}</a
          >
        </p>

        <p style="font-size: 14px; color: #666; margin-top: 25px">
          For assistance or security concerns, please contact the TCIOE EMIS
          support team or visit our help center.
        </p>
      </div>

      <div class="footer">
        <!-- Footer Logo - Gmail Compatible -->
        <div style="margin-bottom: 20px; text-align: center">
          <img
            src="https://res.cloudinary.com/deibqsazd/image/upload/v1763796707/logo_kbfjba.png"
            alt="TCIOE Logo"
            width="60"
            height="60"
            style="border-radius: 8px; margin: 0 auto 15px; display: block"
            onerror="this.style.display='none'; document.getElementById('footer-fallback-logo').style.display='block';"
          />
          <div
            id="footer-fallback-logo"
            class="footer-logo-fallback"
            style="display: none"
          >
            TC
          </div>

          <div
            style="
              font-size: 18px;
              font-weight: bold;
              color: white !important;
              margin-bottom: 5px;
            "
          >
            TCIOE EMIS System
          </div>
          <div
            style="
              font-size: 13px;
              color: #1abc9c !important;
              margin-bottom: 20px;
            "
          >
            Thapathali Campus, Institute of Engineering<br />
            Educational Management Information System
          </div>
        </div>

        <!-- Footer Content - Using simple table layout for Gmail compatibility -->
        <table
          width="100%"
          cellpadding="0"
          cellspacing="0"
          border="0"
          style="margin: 20px 0"
        >
          <tr>
            <td
              width="33%"
              style="text-align: center; vertical-align: top; padding: 0 10px"
            >
              <div class="footer-section">
                <strong style="color: white !important">Support</strong>
                <div style="margin: 8px 0">
                  <a href="mailto:emis@tcioe.edu.np" class="footer-link"
                    >emis@tcioe.edu.np</a
                  >
                </div>
                <div style="margin: 8px 0">
                  <a href="tel:+977-1-5555555" class="footer-link"
                    >+977-1-5555555</a
                  >
                </div>
              </div>
            </td>
            <td
              width="34%"
              style="text-align: center; vertical-align: top; padding: 0 10px"
            >
              <div class="footer-section">
                <strong style="color: white !important">Quick Links</strong>
                <div style="margin: 8px 0">
                  <a href="https://tcioe.edu.np" class="footer-link">TCIOE</a>
                </div>
                <div style="margin: 8px 0">
                  <a
                    href="https://ioe.edu.np"
                    target="_blank"
                    class="footer-link"
                    >IOE</a
                  >
                </div>
              </div>
            </td>
            <td
              width="33%"
              style="text-align: center; vertical-align: top; padding: 0 10px"
            >
              <div class="footer-section">
                <strong style="color: white !important">Connect</strong>
                <div style="margin: 15px 0">
                  <a
                    href="https://www.facebook.com/thapathali.ioe"
                    target="_blank"
                    style="text-decoration: none; margin: 0 8px"
                  >
                    <img
                      src="https://app-rsrc.getbee.io/public/resources/social-networks-icon-sets/circle-color/facebook@2x.png"
                      width="32"
                      height="32"
                      alt="Facebook"
                      class="social-icon"
                      style="border-radius: 50%; display: inline-block"
                    />
                  </a>
                  <a
                    href="https://www.linkedin.com/school/tcioe"
                    target="_blank"
                    style="text-decoration: none; margin: 0 8px"
                  >
                    <img
                      src="https://app-rsrc.getbee.io/public/resources/social-networks-icon-sets/circle-color/linkedin@2x.png"
                      width="32"
                      height="32"
                      alt="LinkedIn"
                      class="social-icon"
                      style="border-radius: 50%; display: inline-block"
                    />
                  </a>
                </div>
              </div>
            </td>
          </tr>
        </table>

        <div class="copyright">
          ¬© {{ current_year|default:"2025" }} Thapathali Campus, Institute of
          Engineering. All rights reserved.<br />
          This is an automated security message. Please do not reply to this
          email.<br />
          <br />
          <span
            style="font-size: 11px; opacity: 0.8; color: #1abc9c !important"
          >
            üìß Email sent on {{ sent_time|default:"now" }}
          </span>
        </div>
      </div>
    </div>
  </body>
</html>
